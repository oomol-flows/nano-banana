title: Images Nano Banana Edit
nodes:
  - node_id: nano-banana-edit#1
    task: self::nano-banana-edit
    inputs_from:
      - handle: image_urls
        value:
          - "https://canvas-conversion-demo-dev.oss-cn-hangzhou.aliyuncs.com/%E\
            5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_2025-11-11_162033_040.jpg"
        from_flow:
          - input_handle: image_urls
      - handle: prompt
        from_flow:
          []
        from_node:
          - node_id: llm-chat#1
            output_handle: output

  - node_id: extract-request-id#1
    task: self::extract-request-id
    inputs_from:
      - handle: response
        from_node:
          - node_id: nano-banana-edit#1
            output_handle: result

  - node_id: nano-banana-get-result#1
    task: self::nano-banana-get-result
    inputs_from:
      - handle: request_id
        from_node:
          - node_id: extract-request-id#1
            output_handle: request_id
      - handle: poll_interval
        value:
        from_flow:
          - input_handle: poll_interval
      - handle: max_attempts
        value:
        from_flow:
          - input_handle: max_attempts
  - node_id: llm-chat#1
    title: "大语言模型聊天 #1"
    inputs_from:
      - handle: messages
        value: null
        from_flow:
          []
      - handle: timeout
        value: 30
      - handle: retry_times
        value: 0
      - handle: model
        value:
          model: deepseek-chat
          temperature: 0.5
          top_p: 1
          max_tokens: 128000
      - handle: template
        value:
          - role: user
            content: "Translate {{input}} content into English and then output"
        schema_overrides:
          - schema:
              type: array
      - handle: retry_sleep
        value: 3.5
      - handle: skills
        value:
          []
      - handle: stream
        value: true
      - handle: input
        value: hello!
        from_flow:
          - input_handle: prompt
    task: llm::llm-chat
    inputs_def:
      - handle: input
        description: User input text to be appended to the conversation
        json_schema:
          type: string
          ui:widget: text
        value: hello!
inputs_def:
  - handle: image_urls
    json_schema:
      type: array
      items:
        type: string
    nullable: false
    description: List of image URLs to edit
    value:
      - https://canvas-conversion-demo-dev.oss-cn-hangzhou.aliyuncs.com/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_2025-11-11_162033_040.jpg
    executor_name: python
  - handle: prompt
    json_schema:
      type: string
      ui:widget: text
    nullable: false
    description: Edit instruction prompt describing the desired changes
    executor_name: python
  - group: Optional
    collapsed: true
  - handle: poll_interval
    json_schema:
      type: integer
    nullable: true
    description: Interval in seconds between polling attempts
    value:
    executor_name: python
  - handle: max_attempts
    json_schema:
      type: integer
    nullable: true
    description: Maximum number of polling attempts before timeout
    value:
    executor_name: python
outputs_def:
  - handle: images
    json_schema:
      type: array
      items:
        type: string
    nullable: false
    description: Array of edited image URLs
    executor_name: python
outputs_from:
  - handle: images
    from_node:
      - node_id: nano-banana-get-result#1
        output_handle: images
