title: "%test-multi-image-processing%"

nodes:
  # Test case 1: One URL and one null
  - node_id: nano-banana-edit#2
    title: "%nano-banana-2%"
    inputs_from:
      - handle: image_urls
        value:
          - https://fusion-api.oss-ap-southeast-1.aliyuncs.com/file-upload/019343aa-ff25-727c-a449-9017313539b0/019c0410-989d-7000-9b8c-c8cc87cdb370.jpg?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=LTAI5t96hijXAvfUV5T7Rx7B%2F20260128%2Foss-ap-southeast-1%2Fs3%2Faws4_request&X-Amz-Date=20260128T100522Z&X-Amz-Expires=604799&X-Amz-Signature=5b7cc398ccb72f8d88fa76f3cba2f36a037f0d53e019802b99430535b3d01647&X-Amz-SignedHeaders=host
      - handle: prompt
        value: 图片加 皮卡丘
    task: self::nano-banana-edit
  - node_id: upload-to-cloud#1
    title: "%1%"
    inputs_from:
      - handle: file
        value: /oomol-driver/oomol-storage/ooimage.jpg
    task: alicloud-oss::upload-to-cloud
  - node_id: nano-banana-get-result#1
    title: "%nano-banana-12%"
    inputs_from:
      - handle: session_id
        value: 0d0a96f8-28b5-4523-808f-d01e169df8ca
      - handle: poll_interval
        value: null
      - handle: max_attempts
        value: null
    task: self::nano-banana-get-result
  - node_id: url-images-nano-banana-edit#2
    title: "%url-nano-banana-2%"
    inputs_from:
      - handle: image_urls
      - handle: prompt
      - handle: poll_interval
        value: null
      - handle: max_attempts
        value: null
    subflow: self::nano-banana-images-edit
  - node_id: nano-banana-images-edit#1
    title: "Nano Banana 图片编辑 #1"
    inputs_from:
      - handle: image_urls
        value:
          - https://fal.media/files/monkey/e6RtJf_ue0vyWzeiEmTby.png
        schema_overrides:
          - path: 0
            schema:
              type: string
      - handle: prompt
        value: 狗头变为女人
      - handle: poll_interval
        value: null
      - handle: max_attempts
        value: null
    subflow: self::nano-banana-images-edit
